<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title> 诺心蛋糕--详情页</title>
	<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/index.css">
<link rel="stylesheet" href="css/xiangqing.css">
<link rel="stylesheet" href="css/common.css"> <!-- 公共样式 -->

<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->

<script src="js/jquery-3.0.0.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="js/bootstrap.min.js"></script>
<script src="js/index.js"></script>
<script src="js/jquery.cookie.js"></script>

</head>

<body>

<!-- 头部1开始 -->
		<div class="lianjiebox">
				<div class="lianjie_L row col-md-10 col-md-offset-1">
				<!-- 链接开始 -->
					<div class="col-md-4">
						<ul class="nav nav-pills" role="tablist">
						   <li><a href="index.html"><img src="images/title/nav1.jpg" alt=""></a></li>
						  <li><a href="#"><img src="images/title/nav2.jpg" alt=""></a></li>
						   <li><a href="#"><img src="images/title/nav3.png" alt=""></a></li>
						   
						</ul>
					</div>
					<div class="logo_pic col-md-2"><img src="images/logo/logo.jpg" alt=""></div>
					<div id="wrap" class="col-md-4 col-md-offset-2">
						<ul class="lianjie_R nav nav-pills" role="tablist">
						   <li role="presentation"><a href="#"><img src="images/title/nav5.jpg" alt=""></a></li>
						  <li role="presentation"><a href="#"><img src="images/title/nav6.jpg" alt=""></a></li>
						   <li role="presentation"><a href="#"><img src="images/title/nav7.jpg" alt=""></a></li>
				
						</ul>
					</div>
			
			</div>
		</div>
	<div class="container-fluid">
		<div class="reg_head row">
				<div class="lianjie_B">
						<!-- 链接开始 -->
							<div class=" lianjie_B_Top col-md-5">
								<ul class=" nav nav-pills" role="tablist">
								   <li><a href="#">小米网</a></li>
								  <li class="col-md-10"><a href="#"> 全国客服热线&nbsp;&nbsp;4001-578-578&nbsp;&nbsp;服务时间&nbsp;&nbsp;8:30-22:30</a></li>
								</ul>
							</div>
							<div id="wrap" class="col-md-5 right">
								<ul class="col-md-12 lianjie_B_B nav-pills">
								   <li><a href="login.html">登录</a></li>
								  <li><a href="register.html">注册</a><span>|</span></li>
								   <li><a href="gwc.html">购物车</a><span>|</span></li>
								    <li><a href="#">帮助</a><span>|</span></li>
								</ul>
							</div>
						
					</div>
			</div>

		</div>
		<!-- 下面的是内容部分 -->
		<div class="container register_body">
			<div class="xiangqing row">
				<div class="xiangqing_banner_L" style="float:left">
					<img src="images/xiangqing/TN_cake-list_03.jpg" alt="">
					<img src="images/xiangqing/TN_cake-list1_03.jpg" alt="">
					<img src="images/xiangqing/TN_cake-list2_03.jpg" alt="">
				</div>
				<div class="xiangqing_banner_R"><img src="images/xiangqing/banner.jpg" alt="" style="float:left"></div>
			</div>
<!-- 详情开始 -->
			<!-- 第一个开始-->
			<div class="xiangqingstr row">
<!-- <div class="xiangbox row">
	<div class=" col-md-4">
			<div class="xiang row">
			  
				  <a class="media-left" href="#">
				    <img src="images/img/xiang1.jpg" alt="...">
				  </a>
			      <div class="caption row">
			      	<div class="col-md-6">
				        <h5>雪域牛乳芝士蛋糕</h5>
				        <p>Le Cheesecake</p>
			        </div>
			        <div class="col-md-6">
				        <p>  1磅 价格：<span class="red">198.00 </span></p>
				        <p>
							甜度：
							<span class="glyphicon glyphicon-heart"></span>
							<span class="glyphicon glyphicon-heart"></span>

						</p>
					</div>
			      </div>
			    <dt>
             
                <p>主要原材料：巧克力(比利时嘉利宝)、芝士(新西兰安佳)、黄油（新西兰安佳/法国铁塔）、淡奶．．．</p>
               
                </dt>
			 
			  <div class="xiang_js1 xiang_div_btn pr_0">
						<div class="btn-group">
						 <a href=""><button type="button" class="col-md-3">1磅</button></a>
						 <a href=""><button type="button" class="col-md-3">2磅</button></a>
						 <a href=""><button type="button" class="col-md-3">3磅</button></a>
						 <a href=""><button type="button" class="col-md-3" style="border:none;">4磅</button></a>
						</div>
						<div class="xiang_div_btn_gwc btn-group">
						 <a href=""><button type="button" class="col-md-6">加入购物车</button></a>
						 <a href=""><button type="button" class="col-md-6">立即购买</button></a>
						</div>
				</div>
			</div>
	 </div>
</div> -->
</div>
				<!-- 第一个结束 -->
<!-- 详情结束 -->

		</div>
	<!-- 下面是bottom部分 -->

<!-- ***********************************footer***************************************** -->
	<div class="footer">
		<div class="footer_con">
			<div class="d1">
				<img class="fl" src="images/img/TN_but_LOGO.png" alt="">
				<p class="fl">
					<span>新鲜配送上门</span>
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>|
					<a href="javascript:;">上海</a>| 
					<a href="javascript:;">上海</a>| 
				</p>
			</div>
			<ul class="d2">
				<li><img src="images/img/boli1.png" alt=""><i>全年无休</i></li>
				<li><img src="images/img/boli2.png" alt=""><i>安全配送</i></li>
				<li><img src="images/img/boli3.png" alt=""><i>品质保证</i></li>
				<li><img src="images/img/boli4.png" alt=""><i>上乘食材</i></li>
				<li><img src="images/img/boli5.png" alt=""><i>专业客服</i></li>
				<li><img src="images/img/boli2.png" alt=""><i>企业采购</i></li>
			</ul>
			<p class="d3">
				<a href="javascript:;">关于诺心</a>|
				<a href="javascript:;">人才招聘</a>|
				<a href="javascript:;">练习我们</a>|
				<a href="javascript:;">呼叫中心</a>|
				<a href="javascript:;">品牌理念</a>|
				<a href="javascript:;">客服服务</a>|
				<a class="gongshang"><img src="images/img/gongshang.gif" alt=""></a>
			</p>
			<p class="TN_Fstree L">
            <a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备10211730</a> |
            <span><a href="http://rescdn.lecake.com/shop/lecake/theme/xth2/images/index/business_certificate3.jpg" style="margin: 0" target="_blank">社会信用代码：913100005648062293</a></span> |
            <span><a href="http://rescdn.lecake.com/shop/lecake/theme/xth2/images/index/business_certificate1.jpg" style="margin: 0" target="_blank">食品经营许可证</a></span> |
            <span><a href="http://rescdn.lecake.com/shop/lecake/theme/xth2/images/index/business_certificate2.jpg" style="margin: 0" target="_blank">诺心上海生产许可证</a></span> |
            <span>copyright©2010-2016诺心lecake.com版权所有</span> <br>
            <span>公司名称：诺心食品（上海）有限公司</span> |
            <span>公司地址：上海徐汇区田林路140号28号楼</span> |
            <span>客服邮箱: services@lecake.com</span> |
            <span>公司电话：4001-578-578</span>

        </p>
		</div>
	</div>
	
<script>
/*--------------------以上是通过获取json数据把详情页整个动态布局出来--------------------*/
	var i = 0;
	var str2 = "";

	$.ajax({
		url: 'js/xiangqing.json',
	})
	.done(function(data) {
		$.each(data,function(index,data) {
			console.log(typeof data.imgres)
			str2 += "<div class='col-md-4'>"
			+"<div class='xiang row'>"
				  +"<a class='media-left' href='gwc.html?id="+data.id+"'>"
				    +"<img src='"+data.imgres+"'>"
				  +"</a>"
			      +"<div class='caption row'>"
			      	+"<div class='col-md-6'>"
				       +"<h5>"+data.title+"</h5>"
				        +"<p>Le Cheesecake</p>"
			        +"</div>"
			        +"<div class='col-md-6'>"
				        +"<p>  1磅 价格：<span class='red'>+￥"+data.price+"</span></p>"
				        +"<p>"+"甜度："+
							+"<span class='glyphicon glyphicon-heart'></span>"
							+"<span class='glyphicon glyphicon-heart'></span>"

						+"</p>"
					+"</div>"
			      +"</div>"
			    +"<dt>"
             
                +"<p>主要原材料：巧克力(比利时嘉利宝)、芝士(新西兰安佳)、黄油（新西兰安佳/法国铁塔）、淡奶．．．</p>"
               
                +"</dt>"
			 
			  +"<div class='xiang_js1 xiang_div_btn pr_0'>"
						+"<div class='btn-group'>"
						 +"<a href=''><button type='button' class='col-md-3'>1磅</button></a>"
						 +"<a href=''><button type='button' class='col-md-3'>2磅</button></a>"
						 +"<a href=''><button type='button' class='col-md-3'>3磅</button></a>"
						 +"<a href=''><button type='button' class='col-md-3' style='border:none;''>4磅</button></a>"
						+"</div>"
						+"<div class='xiang_div_btn_gwc btn-group'>"
						 +"<a href='javascript:;'><button type='button' class='js-btn col-md-6' data-id='"+data.id+"'>加入购物车</button></a>"
						 +"<a href=''><button type='button' class='col-md-6'>立即购买</button></a>"
						+"</div>"
				+"</div>"
			+"</div>"
	 +"</div>";
	});
$(".xiangqingstr").html(str2)

/*----------------------下面是当点击购物车时setcookie部分---------------------------*/  

				var total = $.cookie("total")||0;
				if($.cookie("cart")){
						var obj = JSON.parse($.cookie("cart"))
						console.log(obj);//输出的值就是cookie里的num值
					}else{
						var obj = {};
					}
					// var obj = JSON.parse($.cookie("cart"))||0;//不懂和上面的有什么区别以及为什么会报错误(因为这个是parse函数，所以当为空的时候会报错 但是下面的num就可以用("||")或字符 因为是数字类型 空的话只会包undefined但是不会报错)
					$(".js-btn").each(function(){//循环遍例btn 为什么不用btn循环而用js-btn是为了避免多人开发合作时btn用的冲突
						var num = obj[$(this).attr("data-id")]||0;
						// console.log(num)
						$(this).click(function(){

							var prodId = $(this).attr("data-id");//赋值点击按钮的id给prodId
							console.log(prodId)
							obj[prodId] = ++num;//每点击一次点击物品购物车商品数量加1
							// console.log(obj[prodId])
							var objTostr = JSON.stringify(obj);//json转换成字符串格式 并且赋值给objtostr
							// console.log(objTostr)
							$.cookie("cart",objTostr,{expires:7,path:"/"});//把上一步转化过来的字符串格式存储cookie里(因为存储cookie必须用字符串的格式) 自定义cookie名cart

							var cookieObj = JSON.parse($.cookie("cart"));//将字符串格式转换成json格式 为了下面遍例循环key和value值
							 console.log(cookieObj)//cookieObj就是cookie里面存的所选取商品的id和数量
							$.each(cookieObj,function(key,value){
								
								console.log(data[key].id,data[key].title,data[key].price);
								
							})
						})
					})
				
	/*-----------------------这里是详情页每商品的滑入滑出动画---------------------------*/ 
		
	
	 			// 滑入动画
	 			
			$(".xiang").mouseover(function(){
				$(this).find(".xiang_div_btn").stop().animate({top:262});
					//$(".xiang_div_btn").eq(0).stop().animate({top:262});

			})
		
			// //滑入动画时每个按钮的颜色变为红色
			$(".xiang_div_btn").mouseover(function(){
					
					$("a").hover(function(){
						
						   $(this).css("color","red");
						})
					$("a").mouseout(function(){
						
						   $(this).css("color","black");
						})

			})

			//滑出动画
			$(".xiang").mouseout(function(){
				$(this).find(".xiang_div_btn").stop().animate({top:350});
				});
		})


</script>
</body>
</html>